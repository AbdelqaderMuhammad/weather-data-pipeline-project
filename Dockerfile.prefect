# Use a lightweight Python image with ARM64 support
FROM python:3.9-slim

# Install system dependencies and Prefect
RUN apt-get update && apt-get install -y \
    git \
    libpq-dev \
    gcc \
    && pip install --no-cache-dir prefect

# Set working directory
WORKDIR /usr/app/prefect

# Expose Prefect server port
EXPOSE 4201

# Command to start the Prefect server
CMD ["prefect", "server", "start"]